```markdown
# 基本設計書

## ドキュメント概要

本基本設計書は、休暇取得状況把握の要件に基づき、システムの基本設計を定義するものである。日本 IT 業界の標準的な規範に従い、明確かつ構造化された記述を行う。

## システム概要

本システムは、従業員の休暇取得状況を把握するための機能である。人事部門が、従業員の休暇取得状況（取得日数、残日数、取得傾向など）を部門別、個人別に集計し、把握できることを目的とする。

## 要件定義

### 要件一覧

| ID      | 分類     | 要件名           | 概要                                                                                                       | 利用者   |
| ------- | -------- | ---------------- | ---------------------------------------------------------------------------------------------------------- | -------- |
| req-010 | 休暇管理 | 休暇取得状況把握 | 人事部門は、全従業員の休暇取得状況（取得日数、残日数、取得傾向など）を部門別、個人別に集計し、把握できる。 | 人事部門 |

## 機能設計

### 休暇取得状況把握機能 (req-010)

#### 機能概要

人事部門が、従業員の休暇取得状況（取得日数、残日数、取得傾向など）を部門別、個人別に集計し、把握できる機能を提供する。

#### 入力仕様

- **部門別集計**:
  - 対象部門を選択。
  - 集計期間（開始日、終了日）を指定。
- **個人別集計**:
  - 対象従業員を選択。
  - 集計期間（開始日、終了日）を指定。
- **集計条件**:
  - 休暇の種類（有給、慶弔、など）を選択。（任意）

#### 出力仕様

- **画面表示**:
  - 部門別/個人別の休暇取得状況一覧表を表示。
    - 従業員 ID/氏名、取得日数、残日数、取得傾向（グラフ表示）。
- **データ出力**:
  - 集計結果を CSV 形式でダウンロード可能。

#### 処理フロー

1. 人事部門担当者が、システムにログインし、休暇取得状況把握機能を選択。
2. 部門別または個人別の集計条件を入力。
3. システムがデータベースから休暇データを取得し、集計処理を行う。
4. 集計結果を画面に表示、または CSV ファイルとして出力。

#### エラー処理

- **入力値エラー**:
  - 集計期間の開始日と終了日の整合性が取れない場合、<span style="color:red;">エラーメッセージを表示（例：「期間の開始日が終了日より後になっています」）。</span>
- **データが存在しない**:
  - 指定された条件に合致する休暇データが存在しない場合、<span style="color:red;">「該当するデータが見つかりませんでした」というメッセージを表示。</span>
- **データベース接続エラー**:
  - データベースへの接続に失敗した場合、<span style="color:red;">エラーログを記録し、管理者へ通知。</span>

## データ設計

### データベース構造

#### 休暇申請テーブル (T_VACATION_REQUEST)

| 項目名           | データ型     | 説明                                          | 主キー |
| ---------------- | ------------ | --------------------------------------------- | ------ |
| request_id       | BIGINT       | 休暇申請 ID（自動採番）                       | ○      |
| employee_id      | VARCHAR(10)  | 従業員 ID                                     |        |
| vacation_type    | VARCHAR(2)   | 休暇種別（有給:01/慶弔:02/...）               |        |
| start_date       | DATE         | 休暇開始日                                    |        |
| end_date         | DATE         | 休暇終了日                                    |        |
| application_date | DATETIME     | 申請日                                        |        |
| approval_status  | VARCHAR(2)   | 承認ステータス（申請中:01/承認済:02/却下:03） |        |
| reason           | VARCHAR(255) | 理由                                          |        |

#### 従業員マスタテーブル (M_EMPLOYEE)

| 項目名        | データ型    | 説明      | 主キー |
| ------------- | ----------- | --------- | ------ |
| employee_id   | VARCHAR(10) | 従業員 ID | ○      |
| employee_name | VARCHAR(50) | 従業員名  |        |
| department_id | VARCHAR(10) | 部門 ID   |        |

#### 部門マスタテーブル (M_DEPARTMENT)

| 項目名          | データ型    | 説明    | 主キー |
| --------------- | ----------- | ------- | ------ |
| department_id   | VARCHAR(10) | 部門 ID | ○      |
| department_name | VARCHAR(50) | 部門名  |        |

## インターフェース設計

### 内部インターフェース

- **データベース**:
  - JDBC 経由でデータベースに接続し、SQL を実行。

### 画面インターフェース

- 休暇取得状況把握画面
  - 部門選択ドロップダウン
  - 従業員選択ドロップダウン
  - 集計期間指定（開始日、終了日）
  - 休暇種類選択（任意）
  - 集計結果表示テーブル
  - CSV ダウンロードボタン

## 非機能要件

### 性能

- 集計処理：1000 人規模のデータに対して、5 秒以内に結果を表示。

### セキュリティ

- アクセス権限：人事部門担当者のみアクセス可能。

## テスト計画

### 単体テスト

- 各 SQL クエリの正当性確認。
- 集計ロジックの検証。

### 結合テスト

- 画面からの入力とデータ集計、表示が正しく連動することを確認。

### システムテスト

- 本番環境を想定したデータ量で、性能要件を満たすことを確認。

## 運用・保守

### 運用体制

- 定期的なデータバックアップ。
- システムログの監視。

### 保守内容

- 障害発生時の迅速な復旧。
- 法改正に伴うシステム改修。

## 付録

### 用語集

- 休暇：従業員が業務を休むこと。
- 有給休暇：労働基準法で定められた、賃金が支払われる休暇。
- 慶弔休暇：慶事や弔事の際に取得できる休暇。

### 参考資料

- 従業員就業規則
- データベース設計書
```
