
# 基本設計書

## ドキュメント概要

本基本設計書は、出退勤システムの要件に基づき、システムの基本設計を定義するものである。日本 IT 業界の標準的な規範に従い、明確かつ構造化された記述を行う。

## システム概要

本システムは、従業員の出退勤時刻を正確に記録・管理するための出退勤システムである。本設計書では、従業員によるシフト確認機能について定義する。

## 要件定義

### 要件一覧

| ID      | 分類       | 要件名     | 概要                                                               | 利用者     |
| ------- | ---------- | ---------- | ------------------------------------------------------------------ | ---------- |
| req-018 | シフト管理 | シフト確認 | 従業員は、自身に割り当てられた勤務シフトをオンラインで確認できる。 | 一般従業員 |

## 機能設計

### シフト確認機能 (req-018)

#### 機能概要

一般従業員が、Web アプリケーションまたはスマートフォンアプリを通じて、自身に割り当てられた勤務シフトを確認できる機能を提供する。

#### 入力仕様

- **Web/スマートフォンアプリ共通**
  - **期間指定**:
    - 開始日 (YYYY-MM-DD)
    - 終了日 (YYYY-MM-DD)
    - デフォルトは当月とする。

#### 出力仕様

- **画面表示**
  - 指定された期間の勤務シフトをカレンダー形式、またはリスト形式で表示する。
  - シフト情報には、日付、勤務時間、勤務場所（部署）、休憩時間等が含まれる。
  - シフト確定状況を表示する（例：確定済み、仮シフト）。

#### 処理フロー

1. 従業員がシステムにログインし、シフト確認画面を開く。
2. 従業員が必要に応じて期間を指定する。
3. システムが、従業員 ID と指定された期間に基づき、シフト情報をシフトテーブルから取得する。
4. 取得したシフト情報を画面に表示する。

#### エラー処理

- **データなし**: 指定された期間にシフト情報が存在しない場合、「指定された期間のシフトは登録されていません。」等のメッセージを表示する。
- **システムエラー**: シフト情報の取得中にエラーが発生した場合、<span style="color:red;">「システムエラーが発生しました。管理者にお問い合わせください。」</span>等のメッセージを表示する。
- **期間指定不正**: 開始日が終了日より後の日付の場合、<span style="color:red;">「期間指定が不正です。開始日より後の日付を終了日に指定してください。」</span>等のメッセージを表示する。

## データ設計

### データベース構造

#### シフトテーブル (T_SHIFT)

| 項目名      | データ型    | 説明                                       | 主キー |
| ----------- | ----------- | ------------------------------------------ | ------ |
| shift_id    | BIGINT      | シフト ID（自動採番）                      | ○      |
| employee_id | VARCHAR(10) | 従業員 ID                                  |        |
| shift_date  | DATE        | 勤務日                                     |        |
| start_time  | TIME        | 勤務開始時間                               |        |
| end_time    | TIME        | 勤務終了時間                               |        |
| break_time  | INT         | 休憩時間（分）                             |        |
| location    | VARCHAR(50) | 勤務場所（部署名など）                     |        |
| status      | VARCHAR(2)  | シフト確定状況（01:確定済み, 02:仮シフト） |        |

## インターフェース設計

### 内部インターフェース

- **サーバー間通信**
  - プロトコル: HTTPS
  - データ形式: JSON
  - エンドポイント例:
    - GET /api/shifts/{employee_id}?start_date=YYYY-MM-DD&end_date=YYYY-MM-DD （従業員のシフト情報取得）

## 非機能要件

### 性能

- シフト情報表示: 1 ヶ月分のシフト情報が 2 秒以内に表示されること。

### セキュリティ

- 従業員は自身のシフト情報のみ閲覧可能とし、他従業員のシフトデータへのアクセスは不可とする。

## テスト計画

### 単体テスト

- シフト確認画面で、指定された期間のシフト情報が正しく表示されることを確認する。
- シフト情報が存在しない場合に、エラーメッセージが正しく表示されることを確認する。

### 結合テスト

- 従業員情報マスタと連携し、従業員 ID に基づいて正しいシフト情報が取得できることを確認する。
- シフト確定状況（確定済み、仮シフト）が正しく表示されることを確認する。

## 付録

### 用語集

- **シフト**: 従業員に割り当てられた勤務スケジュール。
- **仮シフト**: まだ確定していない仮の勤務スケジュール。

### 参考資料

- 日本 IT 業界標準設計書テンプレート（JISA）
- 出退勤システム要件定義書（2025 年 6 月版）

