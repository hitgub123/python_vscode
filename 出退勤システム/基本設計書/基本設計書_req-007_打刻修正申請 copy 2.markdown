承知いたしました。ご指摘いただいた2点（他の機能の記述を省略、詳細な章番号を削除）を改善し、新たな要件`req-007`に基づいた基本設計書を作成します。

---
--- START OF FILE 基本設計書_req-007_休暇申請.md ---

# 基本設計書

## ドキュメント概要
本基本設計書は、出退勤システムの要件に基づき、システムの基本設計を定義するものである。日本IT業界の標準的な規範に従い、明確かつ構造化された記述を行う。

## システム概要
本システムは、従業員の出退勤時刻を正確に記録・管理するための出退勤システムである。本設計書では、従業員による休暇申請機能について定義する。

## 要件定義
### 要件一覧
| ID | 分類 | 要件名 | 概要 | 利用者 |
|---|---|---|---|---|
| req-007 | 休暇管理 | 休暇申請 | 従業員は、システムを通じて休暇（有給、欠勤など）の申請を行うことができる。 | 一般従業員 |

## 機能設計
### 休暇申請機能 (req-007)
#### 機能概要
一般従業員が、Webアプリケーションまたはスマートフォンアプリを通じて、各種休暇の取得申請を行う機能を提供する。申請された内容は、承認者（管理職）へ通知される。

#### 入力仕様
- **Web/スマートフォンアプリ共通**
  - **休暇種別**: 選択式（例：有給休暇、午前半休、午後半休、欠勤、特別休暇）
  - **休暇期間**:
    - 開始日 (YYYY-MM-DD)
    - 終了日 (YYYY-MM-DD)
    - ※終日休暇以外（半休など）の場合は、日付は1日のみ指定可能とする。
  - **申請理由**: テキスト入力（任意入力可とするが、特定の休暇種別では必須とする設定も可能）
  - **連絡先**: テキスト入力（任意）

#### 出力仕様
- **画面表示**
  - 申請完了後、「休暇申請を受け付けました。」等の完了メッセージを表示する。
  - 自身の申請履歴一覧画面で、申請状況（申請中、承認、却下）を確認できる。
- **通知**
  - 申請完了時、申請内容が承認者（直属の上長など）へメール等の手段で通知される。

#### 処理フロー
1. 従業員がシステムにログインし、休暇申請画面を開く。
2. 従業員が休暇種別、期間、理由等の必要項目を入力し、「申請」ボタンを押下する。
3. システムが入力内容の妥当性チェックを行う（例：期間の矛盾、有給残日数の確認）。
4. チェックOKの場合、申請内容を休暇申請テーブルに「申請中」ステータスで保存する。
5. システムが、設定されたワークフローに基づき、承認者へ申請があった旨を通知する。
6. 申請者の画面に、処理完了メッセージを表示する。

#### エラー処理
- **入力不備**: 必須項目が未入力の場合や、日付の前後関係が不正な場合（例：開始日＞終了日）、エラーメッセージを表示し再入力を促す。
- **残日数不足**: 有給休暇申請時に、残日数が不足している場合は、「有給休暇の残日数が不足しています。」等のエラーメッセージを表示し、申請を中断する。
- **二重申請**: 同一期間に既に休暇申請が存在する場合、「指定された期間には既に申請が存在します。」等のエラーメッセージを表示する。

## データ設計
### データベース構造
#### 【新規】休暇申請テーブル (T_LEAVE_APPLICATION)
| 項目名 | データ型 | 説明 | 主キー |
|---|---|---|---|
| application_id | BIGINT | 申請ID（自動採番） | ○ |
| employee_id | VARCHAR(10) | 申請者の従業員ID | |
| leave_type | VARCHAR(2) | 休暇種別コード（01:有給, 02:午前半休, ...） | |
| start_date | DATE | 休暇開始日 | |
| end_date | DATE | 休暇終了日 | |
| reason | VARCHAR(255) | 申請理由 | |
| status | VARCHAR(2) | ステータス（01:申請中, 02:承認, 03:却下, 04:取下） | |
| application_timestamp | DATETIME | 申請日時 | |

## インターフェース設計
### 内部インターフェース
- **サーバー間通信**
  - プロトコル: HTTPS
  - データ形式: JSON
  - エンドポイント例:
    - POST /api/leaves/applications （休暇申請データ登録）
    - GET /api/leaves/applications （自身の休暇申請履歴取得）

## 非機能要件
### 性能
- 休暇申請処理: 2秒以内に完了すること。
- 申請履歴表示: 50件の表示が2秒以内に完了すること。

### セキュリティ
- 自身の休暇申請・閲覧のみ可能とし、他従業員の申請データへのアクセスは不可とする。
- 承認者への通知経路は暗号化する。

## テスト計画
### 単体テスト
- 休暇申請画面の入力バリデーション（必須項目、日付の妥当性）が正しく機能することを確認する。
- 申請データが休暇申請テーブルに正しく保存されることを確認する。

### 結合テスト
- 従業員が申請後、設定された承認者に正しく通知が飛ぶことを確認する。
- 有給休暇申請時に、従業員情報マスタの残日数と正しく連携し、チェックが行われることを確認する。

## 付録
### 用語集
- **休暇申請**: 従業員が休暇を取得するために、事前にシステムを通じて承認を求める手続き。
- **ワークフロー**: 申請から承認・却下までの一連の流れ。

### 参考資料
- 日本IT業界標準設計書テンプレート（JISA）
- 出退勤システム要件定義書（2025年6月版）

--- END OF FILE 基本設計書_req-007_休暇申請.md ---