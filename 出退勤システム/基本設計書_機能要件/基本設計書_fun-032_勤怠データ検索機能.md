## 基本設計書

| ID      | fun-032                      |
| ------- | ---------------------------- |
| 分類    | 勤怠データの分析・レポート               |
| 機能名  | 勤怠データ検索機能                   |
| 概要    | 過去の勤怠データを日付範囲、従業員名、部署、従業員IDなどで検索できる。 |
| 利用者  | 管理職, 人事部門, 経理部門                   |
| 作成者  |                               |
| 作成日付 |                               |

### 1. 目的

本機能は、過去の勤怠データを日付範囲、従業員名、部署、従業員IDなどで検索することを目的とする。

### 2. 適用範囲

本機能は、管理職、人事部門、経理部門が利用する。

### 3. 入力

#### 入力項目

| 項目       | 内容                  | 型       | 必須   | 備考                                                                                       |
| ---------- | --------------------- | -------- | ------ | ------------------------------------------------------------------------------------------ |
| 検索開始日   | 検索対象期間の開始日     | 日付型   | 必須   |                                                                                            |
| 検索終了日   | 検索対象期間の終了日     | 日付型   | 必須   |                                                                                            |
| 従業員名     | 検索対象の従業員名       | 文字列   | 任意   | 部分一致検索                                                                                 |
| 部署       | 検索対象の部署         | 文字列   | 任意   |                                                                                            |
| 従業員ID     | 検索対象の従業員ID       | 文字列   | 任意   |                                                                                            |

#### 業務Check

| 項目       | 内容                                                                                   |
| ---------- | ------------------------------------------------------------------------------------ |
| 検索開始日   | 検索終了日より未来の日付でないこと。                                                              |
| 検索終了日   | 検索開始日より過去の日付でないこと。                                                            |
| 従業員ID     | 従業員IDが入力された場合、社員マスタに登録されているIDであること。                               |

### 4. 出力

| 項目       | 内容                     | 型       | 備考                               |
| ---------- | ------------------------ | -------- | ---------------------------------- |
| 従業員ID   | 従業員のID               | 文字列   |                                    |
| 従業員名   | 従業員の氏名             | 文字列   |                                    |
| 部署       | 従業員の所属部署           | 文字列   |                                    |
| 出勤日     | 出勤した日付             | 日付型   |                                    |
| 出勤時刻   | 出勤時刻                 | 時刻型   |                                    |
| 退勤時刻   | 退勤時刻                 | 時刻型   |                                    |
| 休憩時間   | 休憩時間                 | 時間型   |                                    |
| 残業時間   | 残業時間                 | 時間型   |                                    |

### 5. 処理詳細

1.  画面から入力された検索条件を取得する。
2.  取得した検索条件を基に、勤怠データテーブルを検索する。
3.  検索結果を勤怠データ一覧として画面に表示する。
4.  検索結果がない場合は、該当データがない旨を画面に表示する。

### 6. 例外処理

| 条件                                                                    | 対応                                                                                                                       |
| ----------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------- |
| 検索条件の入力チェックエラー（日付範囲が不正など）                         | <span style="color:red;">エラーメッセージを画面に表示し、検索処理を中断する。エラーログを出力する。</span>                                         |
| データベースへのアクセスエラー                                                        | <span style="color:red;">エラーメッセージを画面に表示し、検索処理を中断する。システム管理者に通知する。エラーログを出力する。</span>                         |
| 検索結果が大量に存在する場合                                  | 検索結果をページング処理で分割して表示する。                                                        |

### 7. 画面設計

*   検索画面：
    *   検索条件入力フィールド（日付範囲、氏名、部署、IDなど）
    *   検索ボタン
    *   検索結果表示領域（勤怠データ一覧）
    *   エラーメッセージ表示領域
    *   ページングコントロール

### 8. その他

*   セキュリティ：検索結果には、アクセス権のあるデータのみを表示する。
*   パフォーマンス：検索処理は、検索対象データ量に応じて適切なインデックスを設定し、高速化を図る。
*   ログ：全ての検索処理（検索条件、検索結果件数など）をログに記録する。
