## 基本設計書

| ID      | fun-006                      |
| ------- | ---------------------------- |
| 分類    | 出退勤記録管理               |
| 機能名  | 部下勤怠履歴参照機能                   |
| 概要    | 管理職が自身の部下の過去の出退勤および休憩打刻履歴を日次・月次で参照できる。 |
| 利用者  | 管理職                   |
| 作成者  |                               |
| 作成日付 |                               |

### 1. 目的

本機能は、管理職が自身の部下の過去の出退勤および休憩打刻履歴を日次・月次で参照することを目的とする。

### 2. 適用範囲

本機能は、管理職が部下の勤怠履歴を参照する際に適用される。

### 3. 入力

#### 入力項目

| 項目       | 内容                  | 型       | 必須   | 備考                                                                                       |
| ---------- | --------------------- | -------- | ------ | ------------------------------------------------------------------------------------------ |
| 管理職ID   | 管理職を識別するID     | 文字列   | 必須   | 社員番号など                                                                               |
| 部下名/ID  | 部下を特定するための情報 | 文字列   | 必須   | 部下名または社員番号                                                                       |
| 期間指定   | 参照したい期間         | 日付型   | 必須   | 参照開始日～参照終了日                                                                   |

#### 業務Check

| 項目       | 内容                                                                                   |
| ---------- | ------------------------------------------------------------------------------------ |
| 管理職ID   | 社員マスタに登録されているIDであり、かつ管理職権限を持つIDであること。                                                            |
| 部下名/ID  | 社員マスタに登録されている部下の名前またはIDであること。管理職IDに紐づく部下であること。                                                           |
| 期間指定   | 参照開始日が参照終了日以前であること。                                                            |

### 4. 出力

| 項目       | 内容                     | 型           | 備考                               |
| ---------- | ------------------------ | ------------ | ---------------------------------- |
| 打刻履歴データ | 指定部下の出退勤・休憩打刻履歴 | テーブル型     | 日次・月次で表示                       |

テーブル型の中身の例：

|項目|内容|型|
|---|---|---|
|日付|日付|日付型|
|出勤時刻|出勤時刻|日時型|
|退勤時刻|退勤時刻|日時型|
|休憩開始時刻1|休憩開始時刻1|日時型|
|休憩終了時刻1|休憩終了時刻1|日時型|
|休憩開始時刻2|休憩開始時刻2|日時型|
|休憩終了時刻2|休憩終了時刻2|日時型|
|…|…|…|

### 5. 処理詳細

1.  管理職がシステムにログインし、部下勤怠履歴参照画面を開く。
2.  管理職ID、部下名/ID、期間を指定し、検索ボタンをクリックする。
3.  システムは、入力された情報を基に、データベースから該当する部下の勤怠履歴データを取得する。
4.  取得したデータを日次・月次で集計し、画面に表示する。

### 6. 例外処理

| 条件                                                                  | 対応                                                                                                                                                  |
| --------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------- |
| 入力チェックエラー（管理職IDが存在しない、部下名/IDが存在しない、期間指定が不正など）         | <span style="color:red;">エラーメッセージを管理職に表示し、処理を中断する。エラーログを出力する。</span>                                                                                                    |
| データベースへのアクセスエラー                                                      | <span style="color:red;">エラーメッセージを管理職に表示し、処理を中断する。システム管理者に通知する。エラーログを出力する。</span>                                                                                                  |
| 該当する部下の勤怠履歴データが存在しない場合                                                | 該当するデータが存在しない旨を画面に表示する。                                                                                                                                  |
| 管理職IDに紐づく部下でないIDが入力された場合                                                  | <span style="color:red;">エラーメッセージを管理職に表示し、処理を中断する。エラーログを出力する。</span>                                                                                                  |

### 7. 画面設計

*   部下勤怠履歴参照画面：
    *   管理職ID入力フィールド（自動表示）
    *   部下名/ID入力フィールド
    *   期間指定（開始日、終了日）
    *   検索ボタン
    *   検索結果表示領域（日次、月次タブ切り替え）
    *   エラーメッセージ表示領域

### 8. その他

*   セキュリティ：参照できる勤怠データは、ログインした管理職の管轄下の部下のみとする。
*   パフォーマンス：検索処理は、5秒以内に完了すること。
*   ログ：全ての参照処理（検索条件、結果件数）をログに記録する。
