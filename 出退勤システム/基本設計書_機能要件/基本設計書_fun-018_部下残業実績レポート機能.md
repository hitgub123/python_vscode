## 基本設計書

| ID      | fun-018                      |
| ------- | ---------------------------- |
| 分類    | 残業管理               |
| 機能名  | 部下残業実績レポート機能                   |
| 概要    | 管理職が自身の部下の月次の残業時間実績を一覧で確認し、労働時間管理に役立てるレポートを生成できる。 |
| 利用者  | 管理職                   |
| 作成者  |                               |
| 作成日付 |                               |

### 1. 目的

本機能は、管理職が自身の部下の月次の残業時間実績を一覧で確認し、労働時間管理に役立てるレポートを生成することを目的とする。

### 2. 適用範囲

本機能は、管理職が部下の残業時間実績を確認する際に適用される。

### 3. 入力

#### 入力項目

| 項目       | 内容                  | 型       | 必須   | 備考                                                                                       |
| ---------- | --------------------- | -------- | ------ | ------------------------------------------------------------------------------------------ |
| 管理職ID   | 管理職を識別するID     | 文字列   | 必須   | 社員番号など                                                                               |
| 対象月     | レポート対象の月       | 日付型   | 必須   | YYYYMM形式                                                                               |
| 部門/チーム指定 | レポート対象の部門またはチーム | 文字列   | 任意   | 指定がない場合は、管理職が管轄する全ての部門/チームが対象                                                                        |

#### 業務Check

| 項目       | 内容                                                                                   |
| ---------- | ------------------------------------------------------------------------------------ |
| 管理職ID   | 社員マスタに登録されている管理職のIDであること。                                                              |
| 対象月     | 過去の月であること。未来の月は指定できないこと。                                                            |
| 部門/チーム指定 | 存在する部門またはチームであること。                               |

### 4. 出力

| 項目       | 内容                     | 型       | 備考                               |
| ---------- | ------------------------ | -------- | ---------------------------------- |
| 部下名     | 部下の氏名               | 文字列   |                                    |
| 従業員ID   | 部下の従業員ID           | 文字列   |                                    |
| 月次残業時間 | 対象月の残業時間         | 数値型   | 単位：時間                           |

出力例：

| 部下名 | 従業員ID | 月次残業時間 |
|---|---|---|
| 山田太郎 | 12345 | 20 |
| 田中花子 | 67890 | 30 |
| ... | ... | ... |

### 5. 処理詳細

1.  管理職が管理職ID、対象月、部門/チーム指定を入力する。
2.  システムは、入力された管理職IDを基に、管轄する部下の一覧を取得する。
3.  指定された対象月と部下の一覧を基に、各部下の残業時間実績をデータベースから取得する。
4.  取得した残業時間実績を基に、レポートを作成する。
5.  レポートを画面に表示する。

### 6. 例外処理

| 条件                                                                    | 対応                                                                                                                       |
| ----------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------- |
| 入力チェックエラー（管理職IDが存在しない、対象月が不正など）           | <span style="color:red;">エラーメッセージを管理職に表示し、レポート生成処理を中断する。エラーログを出力する。</span>                                         |
| データベースへのアクセスエラー                                                        | <span style="color:red;">エラーメッセージを管理職に表示し、レポート生成処理を中断する。システム管理者に通知する。エラーログを出力する。</span>                         |
| 部下の残業時間実績データが存在しない場合                                  | 部下の残業時間実績がない旨をレポートに表示する。                                                        |
| 管理職が管轄する部下がいない場合                                | 管轄する部下がいない旨を画面に表示する。                                |

### 7. 画面設計

*   レポート生成画面：
    *   管理職ID入力フィールド
    *   対象月入力フィールド
    *   部門/チーム指定フィールド（プルダウン形式）
    *   レポート生成ボタン
    *   レポート表示領域
    *   エラーメッセージ表示領域

### 8. その他

*   セキュリティ：管理職IDは暗号化してシステム内で管理する。
*   パフォーマンス：レポート生成処理は、5秒以内に完了すること。
*   ログ：全てのレポート生成処理（成功/失敗）をログに記録する。
