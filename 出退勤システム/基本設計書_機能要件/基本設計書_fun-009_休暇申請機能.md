## 基本設計書

| ID      | fun-009                      |
| ------- | ---------------------------- |
| 分類    | 休暇管理                     |
| 機能名  | 休暇申請機能                   |
| 概要    | 従業員が有給休暇、特別休暇、慶弔休暇などの各種休暇をオンラインで申請できる。 |
| 利用者  | 一般従業員                   |
| 作成者  |                               |
| 作成日付 |                               |

### 1. 目的

本機能は、従業員が各種休暇（有給休暇、特別休暇、慶弔休暇など）をオンラインで申請することを目的とする。

### 2. 適用範囲

本機能は、一般従業員が休暇を申請する際に適用される。

### 3. 入力

#### 入力項目

| 項目       | 内容                  | 型       | 必須   | 備考                                                                                       |
| ---------- | --------------------- | -------- | ------ | ------------------------------------------------------------------------------------------ |
| 従業員ID   | 従業員を識別するID     | 文字列   | 必須   | 社員番号など                                                                               |
| 休暇種別   | 申請する休暇の種類     | 列挙型   | 必須   | 有給休暇、特別休暇、慶弔休暇など                                                               |
| 開始日     | 休暇の開始日           | 日付型   | 必須   |                                                                                            |
| 終了日     | 休暇の終了日           | 日付型   | 必須   |                                                                                            |
| 理由       | 休暇申請の理由         | 文字列   | 任意   |                                                                                            |

#### 業務Check

| 項目       | 内容                                                                                   |
| ---------- | ------------------------------------------------------------------------------------ |
| 従業員ID   | 社員マスタに登録されているIDであること。                                                              |
| 休暇種別   | システムでサポートされている休暇種別（有給休暇、特別休暇、慶弔休暇など）のいずれかであること。                               |
| 開始日     | 未来の日付でないこと。                                                            |
| 終了日     | 開始日以降の日付であること。                                                            |
| 休暇日数   | 休暇種別ごとの最大日数を超えないこと。（例：有給休暇の残日数を超えないこと）                               |

### 4. 出力

| 項目       | 内容                     | 型       | 備考                               |
| ---------- | ------------------------ | -------- | ---------------------------------- |
| 休暇申請ID | システムで自動採番されるID | 数値型   | 休暇申請の一意な識別子             |
| 従業員ID   | 申請を行った従業員のID    | 文字列   | 申請との紐付けに使用                 |
| 休暇種別   | 申請された休暇の種類       | 列挙型   |                                    |
| 開始日     | 申請された休暇の開始日     | 日付型   |                                    |
| 終了日     | 申請された休暇の終了日     | 日付型   |                                    |
| 理由       | 申請された休暇の理由       | 文字列   |                                    |
| 申請日     | 申請が行われた日時       | 日時型   | システムの現在日時                   |
| 承認状況   | 申請の承認状況           | 列挙型   | 申請中、承認済、却下                 |

### 5. 処理詳細

1.  従業員が休暇申請画面から、従業員ID、休暇種別、開始日、終了日、理由を入力し、申請ボタンを押下する。
2.  システムは、入力された情報を取得し、入力チェックを行う。（必須項目のチェック、日付の整合性チェック、休暇残日数チェックなど）
3.  入力チェックに問題がなければ、休暇申請データを生成し、データベースに登録する。
4.  休暇申請データ登録後、管理職へ休暇申請通知を送信する。（メール通知など）
5.  申請処理が成功した場合、従業員に申請完了メッセージを表示する。

### 6. 例外処理

| 条件                                                                    | 対応                                                                                                                       |
| ----------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------- |
| 入力チェックエラー（従業員IDが存在しない、日付の整合性が取れない、休暇残日数が不足しているなど） | <span style="color:red;">エラーメッセージを従業員に表示し、申請処理を中断する。エラーログを出力する。</span>                                         |
| データベースへの書き込みエラー                                                        | <span style="color:red;">エラーメッセージを従業員に表示し、申請処理を中断する。システム管理者に通知する。エラーログを出力する。</span>                         |
| 管理職への通知送信エラー                                                          | <span style="color:red;">申請処理は継続し、エラーログを出力する。システム管理者に通知する。</span>                                                                 |

### 7. 画面設計

*   休暇申請画面：
    *   従業員ID入力フィールド（自動表示）
    *   休暇種別選択ドロップダウン
    *   開始日入力フィールド（カレンダー表示）
    *   終了日入力フィールド（カレンダー表示）
    *   理由入力テキストエリア
    *   申請ボタン
    *   申請完了メッセージ表示領域
    *   エラーメッセージ表示領域

### 8. その他

*   セキュリティ：従業員IDは暗号化してシステム内で管理する。
*   パフォーマンス：休暇申請処理は、5秒以内に完了すること。
*   ログ：全ての休暇申請処理（成功/失敗）をログに記録する。
*   承認フロー：申請された休暇は、承認フローを経て確定する。承認状況は、従業員が確認できること。
