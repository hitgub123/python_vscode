## 基本設計書

| ID      | fun-010                      |
| ------- | ---------------------------- |
| 分類    | 休暇管理                     |
| 機能名  | 休暇申請承認機能               |
| 概要    | 管理職が部下からの休暇申請の一覧を確認し、内容を審査した上で承認または却下できる。 |
| 利用者  | 管理職                       |
| 作成者  |                               |
| 作成日付 |                               |

### 1. 目的

本機能は、管理職が部下からの休暇申請の一覧を確認し、内容を審査した上で承認または却下することを目的とする。

### 2. 適用範囲

本機能は、管理職が部下の休暇申請を承認または却下する際に適用される。

### 3. 入力

#### 入力項目

| 項目       | 内容                  | 型       | 必須   | 備考                                                                                       |
| ---------- | --------------------- | -------- | ------ | ------------------------------------------------------------------------------------------ |
| 管理職ID   | 管理職を識別するID     | 文字列   | 必須   | 社員番号など                                                                               |
| 申請ID     | 休暇申請を識別するID   | 文字列   | 必須   | 休暇申請ごとに一意に発行されるID                                                               |
| 承認/却下選択 | 承認または却下の選択   | 列挙型   | 必須   | 承認、却下のいずれかを選択                                                                 |

#### 業務Check

| 項目       | 内容                                                                                   |
| ---------- | ------------------------------------------------------------------------------------ |
| 管理職ID   | 社員マスタに登録されている管理職のIDであること。                                                              |
| 申請ID     | 休暇申請テーブルに存在する申請IDであること。                                                            |
| 承認/却下選択 | 承認または却下のいずれかの値であること。                               |

### 4. 出力

| 項目       | 内容                     | 型       | 備考                               |
| ---------- | ------------------------ | -------- | ---------------------------------- |
| 申請ステータス | 休暇申請のステータス     | 文字列   | 承認済、却下済、申請中など           |
| 従業員ID   | 申請者の従業員ID         | 文字列   | 結果通知に使用                     |
| 承認/却下日時 | 承認または却下を行った日時 | 日時型   |                                    |

### 5. 処理詳細

1.  管理職が休暇申請一覧画面から、承認または却下する申請を選択する。
2.  システムは、選択された申請の申請ID、入力された管理職ID、承認/却下選択を取得する。
3.  取得した情報を基に、休暇申請テーブルの申請ステータスを更新する。
    *   承認の場合：申請ステータスを「承認済」に更新する。
    *   却下の場合：申請ステータスを「却下済」に更新する。
4.  承認/却下日時を記録する。
5.  申請者（従業員）に、承認または却下の結果を通知する。（メール、システム通知など）
6.  承認/却下処理が成功した場合、管理職に処理完了メッセージを表示する。

### 6. 例外処理

| 条件                                                                    | 対応                                                                                                                       |
| ----------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------- |
| 入力チェックエラー（管理職IDが存在しない、申請IDが存在しないなど）           | <span style="color:red;">エラーメッセージを管理職に表示し、処理を中断する。エラーログを出力する。</span>                                         |
| データベースへの書き込みエラー                                                        | <span style="color:red;">エラーメッセージを管理職に表示し、処理を中断する。システム管理者に通知する。エラーログを出力する。</span>                         |
| 申請ステータスの更新に失敗した場合                                  | <span style="color:red;">エラーメッセージを管理職に表示し、処理を中断する。システム管理者に通知する。エラーログを出力する。</span>                         |
| 申請者が既に退職している場合                                | <span style="color:red;">エラーメッセージを管理職に表示し、処理を中断するか、もしくはシステム設定により通知をスキップするか選択可能とする。<br><span style="color:red;">エラー発生時はエラーログを出力。</span></span> |

### 7. 画面設計

*   休暇申請一覧画面：
    *   休暇申請の一覧表示
    *   承認ボタン
    *   却下ボタン
    *   申請詳細表示機能
*   承認/却下完了メッセージ表示領域
*   エラーメッセージ表示領域

### 8. その他

*   セキュリティ：管理職IDは暗号化してシステム内で管理する。
*   パフォーマンス：承認/却下処理は、3秒以内に完了すること。
*   ログ：全ての承認/却下処理（成功/失敗）をログに記録する。
