## 基本設計書

| ID      | fun-005                      |
| ------- | ---------------------------- |
| 分類    | 出退勤記録管理               |
| 機能名  | 部下リアルタイム勤怠状況表示機能 |
| 概要    | 管理職が自身の部下の現在の出退勤状況（出勤中、退勤済、休暇中など）をリアルタイムで確認できる。 |
| 利用者  | 管理職                       |
| 作成者  |                               |
| 作成日付 |                               |

### 1. 目的

本機能は、管理職が自身の部下の現在の出退勤状況をリアルタイムで確認できるようにすることを目的とする。

### 2. 適用範囲

本機能は、管理職が部下の勤怠状況を確認する際に適用される。

### 3. 入力

#### 入力項目

| 項目         | 内容                       | 型       | 必須   | 備考                                                                                                                                                                                             |
| ------------ | -------------------------- | -------- | ------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| 管理職ID     | 管理職を識別するID           | 文字列   | 必須   | 社員番号など                                                                                                                                                                                     |
| 部門/チーム指定 | 勤怠状況を表示する部門またはチーム | 文字列   | 任意   | 指定がない場合は、管理職が管轄する全ての部門/チームの情報を表示する。                                                                                                                                                             |

#### 業務Check

| 項目         | 内容                                                                                                                                |
| ------------ | ----------------------------------------------------------------------------------------------------------------------------------- |
| 管理職ID     | 社員マスタに登録されており、かつ管理職権限を持つIDであること。                                                                                                          |
| 部門/チーム指定 | 存在する部門/チームであること。管理職が管轄する部門/チームであること。                                                                                                               |

### 4. 出力

| 項目           | 内容                                 | 型                                | 備考                                                                                           |
| -------------- | ------------------------------------ | --------------------------------- | ---------------------------------------------------------------------------------------------- |
| 部下の氏名       | 部下の氏名                               | 文字列                            |                                                                                                |
| 部下の従業員ID   | 部下の従業員ID                           | 文字列                            |                                                                                                |
| 勤怠状況         | 部下の現在の勤怠状況（出勤中、退勤済、休暇中など） | 列挙型 (例：出勤、退勤、休憩、休暇) |                                                                                                |
| 出勤時刻         | 出勤中の場合、出勤時刻                       | 日時型                            |                                                                                                |
| 退勤時刻         | 退勤済の場合、退勤時刻                       | 日時型                            |                                                                                                |
| 休暇理由         | 休暇中の場合、休暇理由                       | 文字列                            |                                                                                                |
| 最終更新日時     | 勤怠状況が最後に更新された日時                 | 日時型                            |                                                                                                |

### 5. 処理詳細

1.  管理職がシステムにログインし、部下リアルタイム勤怠状況表示機能を選択する。
2.  システムは、入力された管理職ID、部門/チーム指定を取得する。
3.  取得した情報を基に、以下の処理を行う。
    *   指定された部門/チームに所属する部下の一覧を取得する。
    *   各部下の現在の勤怠状況を勤怠管理テーブルから取得する。
    *   取得した情報を基に、部下のリアルタイム勤怠状況一覧を生成する。
4.  生成された部下のリアルタイム勤怠状況一覧を画面に表示する。

### 6. 例外処理

| 条件                                                                | 対応                                                                                                                            |
| ------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------- |
| 入力チェックエラー（管理職IDが存在しない、部門/チーム指定が不正など）           | <span style="color:red;">エラーメッセージを管理職に表示し、処理を中断する。エラーログを出力する。</span>                                                                                                        |
| データベースへのアクセスエラー                                                    | <span style="color:red;">エラーメッセージを管理職に表示し、システム管理者に通知する。エラーログを出力する。</span>                                                                                                    |
| 部下の情報が取得できない場合                                                      | 部下の氏名、従業員IDを「-」で表示する。勤怠状況は「不明」と表示する。                                                                                             |
| 勤怠情報が取得できない場合                                                        | 勤怠状況を「不明」と表示する。                                                                                                      |

### 7. 画面設計

*   部下リアルタイム勤怠状況表示画面：
    *   管理職ID入力欄
    *   部門/チーム指定選択肢
    *   部下リアルタイム勤怠状況一覧表示領域 (氏名、従業員ID、勤怠状況、出勤時刻、退勤時刻、休暇理由、最終更新日時)
    *   更新ボタン (手動で情報を更新する場合)

### 8. その他

*   セキュリティ：管理職IDに基づいて、参照できる部下の情報を制限する。
*   パフォーマンス：画面表示は、5秒以内に完了すること。
*   リアルタイム性：勤怠状況は、可能な限り最新の状態を反映すること。（例：5分間隔で自動更新）
*   ログ：本機能の利用状況（管理職ID、表示対象の部門/チーム、表示日時）をログに記録する。
