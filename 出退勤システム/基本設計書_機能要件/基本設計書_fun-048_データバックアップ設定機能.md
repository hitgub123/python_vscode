## 基本設計書

| ID      | fun-048                      |
| ------- | ---------------------------- |
| 分類    | セキュリティ・データ管理               |
| 機能名  | データバックアップ設定機能                   |
| 概要    | 重要な勤怠データの自動バックアップのスケジュールや保存先を設定できる。 |
| 利用者  | システム管理者                   |
| 作成者  |                               |
| 作成日付 |                               |

### 1. 目的

本機能は、重要な勤怠データの自動バックアップのスケジュールや保存先を設定することを目的とする。

### 2. 適用範囲

本機能は、システム管理者による勤怠データのバックアップ設定時に適用される。

### 3. 入力

#### 入力項目

| 項目       | 内容                               | 型       | 必須   | 備考                                                                                       |
| ---------- | ---------------------------------- | -------- | ------ | ------------------------------------------------------------------------------------------ |
| バックアップ頻度 | バックアップを実行する頻度           | 列挙型   | 必須   | 毎日、毎週、毎月など                                                                             |
| 保存期間     | バックアップデータを保存する期間       | 数値型   | 必須   | 日数、週数、月数、年数                                                                           |
| 保存先       | バックアップデータの保存場所         | 文字列   | 必須   | ローカルパス、ネットワークパス、クラウドストレージなど                                                               |

#### 業務Check

| 項目       | 内容                                                                                   |
| ---------- | ------------------------------------------------------------------------------------ |
| バックアップ頻度 | システムでサポートされている頻度（毎日、毎週、毎月など）のいずれかであること。                                                              |
| 保存期間     | 0より大きい数値であること。                                                            |
| 保存先       | システムがアクセス可能なパスであること。存在しないパスの場合は、作成可能であること。                               |

### 4. 出力

| 項目       | 内容                     | 型       | 備考                               |
| ---------- | ------------------------ | -------- | ---------------------------------- |
| バックアップ設定 | 設定されたバックアップ情報       | 連想配列 | バックアップ頻度、保存期間、保存先を含む |

### 5. 処理詳細

1.  システム管理者がバックアップ頻度、保存期間、保存先を入力する。
2.  システムは、入力された情報を取得し、業務Checkを行う。
3.  取得した情報を基に、バックアップ設定を保存する。具体的には、設定ファイルまたはデータベースに以下の情報を登録する。
    *   バックアップ頻度
    *   保存期間
    *   保存先
4.  バックアップ設定が成功した場合、システム管理者に設定完了メッセージを表示する。

### 6. 例外処理

| 条件                                                                    | 対応                                                                                                                       |
| ----------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------- |
| 入力チェックエラー（バックアップ頻度が不正、保存期間が0以下など）           | <span style="color:red;">エラーメッセージをシステム管理者に表示し、設定処理を中断する。エラーログを出力する。</span>                                         |
| 保存先へのアクセスエラー                                                        | <span style="color:red;">エラーメッセージをシステム管理者に表示し、設定処理を中断する。システム管理者に通知する。エラーログを出力する。</span>                         |
| データベースへの書き込みエラー                                                        | <span style="color:red;">エラーメッセージをシステム管理者に表示し、設定処理を中断する。システム管理者に通知する。エラーログを出力する。</span>                         |

### 7. 画面設計

*   バックアップ設定画面：
    *   バックアップ頻度選択ドロップダウン
    *   保存期間入力フィールド
    *   保存先入力フィールド（ファイル選択ダイアログ）
    *   設定完了メッセージ表示領域
    *   エラーメッセージ表示領域

### 8. その他

*   セキュリティ：保存先がネットワークパスの場合、アクセス権限を適切に設定する。
*   ログ：全てのバックアップ設定処理（成功/失敗）をログに記録する。
*   バックアップ処理自体は別の機能として実装される。本機能はあくまで設定機能である。
